{"version":3,"sources":["routes/Networks/Networks.js","util/key.js","components/Datatable/DataTable.js","components/Datatable/DataTableSearch.js","util/Statelabel.js","api/online.js","../node_modules/antd/es/tag/CheckableTag.js","../node_modules/antd/es/tag/index.js","util/PlainSelect.js","../node_modules/@ant-design/icons-svg/es/asn/PlusOutlined.js","../node_modules/@ant-design/icons/es/icons/PlusOutlined.js","util/EditModal.js","routes/Admin/Reference/referenceEditForm.js"],"names":["Networks","props","m","key","prefix","intl","formatMessage","id","onMethodFinish","setState","tableUuid","editModalToggle","editModalId","state","editModalVisible","editModalFinish","setColumns","columns","text","title","className","onClick","e","stopPropagation","icon","dataIndex","sorter","render","value","item","description","filterDropdown","filterIcon","filtered","style","color","undefined","width","onFinish","this","prevProps","locale","essence","onClose","form","referenceEditForm","call","visible","uuid","path","React","Component","contextType","Context","injectIntl","Date","toString","min","max","Math","ceil","floor","random","DataTable","makeBasicDefaultOrderParams","result","forEach","col","defaultSortOrder","push","makeQueryParams","mode","queryParams","pagination","filters","search","filterFields","Object","keys","currentColumn","columnGet","date","field","compare","startOf","endOf","valarr","forceSearch","concat","forceFilter","filter","column","orderby","order","total","skipPagination","reclimit","pageSize","recoffset","current","count","length","context","api","q","replace","forceToken","skipToken","load","data","loadStart","toArray","loadEnd","loading","onLoadStart","onLoadEnd","handleTableChange","scroll","x","showSorterTooltip","rowKey","record","dataSource","onChange","DataTableSearch","setSelectedKeys","selectedKeys","confirm","clearFilters","useIntl","padding","placeholder","target","onKeyPress","paddingTop","type","Modal","Statelabel","popoverToggle","popoverOpen","methods","pendingStart","onPendingStart","pending","pendingEnd","onPendingEnd","classcode","run","method","message","success","error","ask","actioncode","content","onOk","statelabel","label","created","enabled","disabled","deleted","statetypecode","readOnly","spinning","map","trigger","onVisibleChange","withOnline","d","statenewlabel","statenewtypecode","online","is","tick","fetch","goOffline","dispatch","log","goOnline","detail","window","dispatchEvent","CustomEvent","token","accessToken","get","dt","setMilliseconds","getMilliseconds","config","apiCheckInterval","body","JSON","stringify","json","response","headers","Headers","append","url","apiDomain","apiPath","cache","items","Array","isArray","n","object","itemsCount","debug","console","mapOnlineProps","propsKeys","onOnlineChanged","passProps","propName","addEventListener","removeEventListener","anyChanges","onlineInterval","setInterval","__rest","s","t","p","prototype","hasOwnProperty","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","CheckableTag","_a","_classNames","customizePrefixCls","prefixCls","checked","restProps","getPrefixCls","ConfigContext","cls","classNames","_defineProperty","_extends","PresetColorRegex","RegExp","PresetColorTypes","join","PresetStatusColorRegex","PresetStatusColorTypes","InternalTag","ref","children","closeIcon","_a$closable","closable","_React$useContext","direction","_React$useState","_React$useState2","_slicedToArray","setVisible","isPresetColor","test","tagStyle","backgroundColor","presetColor","tagClassName","handleCloseClick","defaultPrevented","isNeedWave","tagProps","omit","iconNode","kids","tagNode","CloseOutlined","Wave","Tag","Option","Select","PlainSelect","createSearch","searchText","async","labelKey","enabledOnly","getLabelKey","getIdKey","valueKey","shureHaveValue","find","fields","query","extraFields","fetchFn","onSearch","then","idx","option","formatLabel","defaultActiveFirstOption","allowClear","showSearch","optionFilterProp","filterOption","input","toLowerCase","PlusOutlined","AntdIcon","_objectSpread","PlusOutlinedSvg","displayName","EditModal","loadPending","loadPath","exact","queryResult","initialValues","save","saveData","prepareData","savePath","savePending","footer","onCancel","name","layout","scrollToFirstError","htmlType","TextArea","Input","reference","appConfig","adminReferences","formItems","rules","required","component","entries","Item"],"mappings":"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","file":"static/js/27.40a0a965.chunk.js","sourcesContent":["import React from \"react\";\nimport { Button } from \"antd\";\nimport { PlusOutlined, SearchOutlined } from \"@ant-design/icons\";\nimport { injectIntl } from \"react-intl\";\nimport Context from \"../../Context\";\nimport key from \"../../util/key\";\nimport DataTable from \"../../components/Datatable/DataTable\";\nimport DataTableSearch from \"../../components/Datatable/DataTableSearch\";\nimport Statelabel from \"../../util/Statelabel\";\nimport EditModal from \"../../util/EditModal\";\nimport referenceEditForm from \"../Admin/Reference/referenceEditForm\";\n\nclass Networks extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      tableUuid: key(),\n      columns: [],\n\n      editModalVisible: false,\n      editModalId: null,\n    };\n  }\n  m = (key, prefix = \"admin.reference.\") => {\n    const { intl } = this.props;\n    return intl.formatMessage({ id: prefix + key });\n  };\n  componentDidMount() {\n    this.setColumns();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.intl.locale !== this.props.intl.locale) {\n      this.setColumns();\n    }\n  }\n\n  onMethodFinish = () => {\n    this.setState({\n      tableUuid: key(),\n    });\n    if (this.props.onMethodFinish) {\n      this.props.onMethodFinish();\n    }\n  };\n\n  editModalToggle = (editModalId = null) => {\n    this.setState((state) => {\n      return { editModalVisible: !state.editModalVisible, editModalId };\n    });\n  };\n\n  editModalFinish = () => {\n    this.editModalToggle();\n    this.onMethodFinish();\n  };\n\n  setColumns = () => {\n    this.setState({\n      columns: [\n        {\n          text: true,\n          title: (\n            <>\n              <Button\n                className=\"gx-mr-4\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  this.editModalToggle();\n                }}\n                icon={<PlusOutlined />}\n              />\n              {this.m(\"name\")}\n            </>\n          ),\n          dataIndex: \"name\",\n          sorter: true,\n          render: (value, item) => (\n            <>\n              <div>\n                <div\n                  className=\"gx-pointer gx-text-primary\"\n                  onClick={() => this.editModalToggle(item.id)}\n                >\n                  <>{value}</>\n                </div>\n              </div>\n\n              {item.description && (\n                <div className=\"gx-font-weight-light gx-text-muted\">\n                  {item.description}\n                </div>\n              )}\n            </>\n          ),\n\n          filterDropdown: (props) => <DataTableSearch {...props} />,\n          filterIcon: (filtered) => (\n            <SearchOutlined\n              style={{ color: filtered ? \"#1890ff\" : undefined }}\n            />\n          ),\n        },\n\n        {\n          title: this.m(\"typename\"),\n          dataIndex: \"typename\",\n          sorter: true,\n          width: \"25%\",\n          render: (value, item) => (\n            <>\n              <div>{value}</div>\n            </>\n          ),\n        },\n\n        {\n          title: this.m(\"statename\"),\n          dataIndex: \"statename\",\n          sorter: true,\n          width: \"10%\",\n          render: (value, item) => (\n            <div className=\"gx-text-right\">\n              <Statelabel onFinish={this.onMethodFinish} {...item} />\n            </div>\n          ),\n        },\n      ],\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <EditModal\n          essence={\"network\"}\n          onClose={this.editModalToggle}\n          form={referenceEditForm.call(this, { essence: \"network\" })}\n          onFinish={this.editModalFinish}\n          visible={this.state.editModalVisible}\n          id={this.state.editModalId}\n        />\n        <DataTable\n          uuid={this.state.tableUuid}\n          columns={this.state.columns}\n          path={\"/network/list\"}\n        />\n      </>\n    );\n  }\n}\n\nexport default injectIntl(Networks);\n","function getRandomIntInclusive(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport default function key() {\n  return `f${(+new Date()).toString(16)}${getRandomIntInclusive(1000, 9999)}`;\n}\n","import React from \"react\";\nimport Context from \"../../Context\";\nimport { Table } from \"antd\";\n\nexport default class DataTable extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      columns: props.columns,\n      data: [],\n      loading: false,\n      pagination: {\n        current: 1,\n        pageSize: props.pageSize || 10,\n        total: false,\n      },\n      filters: {},\n      sorter: {},\n    };\n  }\n\n  componentDidMount() {\n    this.load();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.columns !== this.state.columns) {\n      this.setState({ columns: this.props.columns }, () => this.load());\n    }\n    if (this.props.uuid !== prevProps.uuid) {\n      this.load();\n    }\n    if (this.props.forceSearch !== prevProps.forceSearch) {\n      this.load();\n    }\n  }\n\n  makeBasicDefaultOrderParams = () => {\n    let result = [];\n    if (this.props.columns) {\n      this.props.columns.forEach((col) => {\n        if (col.defaultSortOrder) {\n          result.push(\n            `${col.dataIndex} ${\n              col.defaultSortOrder === \"ascend\" ? \"ASC\" : \"DESC\"\n            }`\n          );\n        }\n      });\n    }\n    return result;\n  };\n\n  makeQueryParams = (mode = {}) => {\n    let queryParams = {};\n    const { pagination, filters, sorter } = this.state;\n\n    //provide filters\n    queryParams.search = [];\n\n    const filterFields = Object.keys(filters);\n    filterFields.forEach((key) => {\n      if (filters[key]) {\n        let currentColumn = this.columnGet(key);\n\n        //Handle dates\n        if (currentColumn.date) {\n          if (filters[key][0]) {\n            queryParams.search.push({\n              field: key,\n              compare: \"GEQ\",\n              value: filters[key][0].startOf(\"day\"),\n            });\n          }\n          if (filters[key][1]) {\n            queryParams.search.push({\n              field: key,\n              compare: \"LEQ\",\n              value: filters[key][1].endOf(\"day\"),\n            });\n          }\n          return;\n        }\n\n        //Handle fulltext\n        if (currentColumn.text) {\n          if (filters[key][0]) {\n            queryParams.search.push({\n              field: key,\n              compare: \"IKE\",\n              value: `%${filters[key][0]}%`,\n            });\n          }\n          return;\n        }\n\n        queryParams.search.push({\n          field: key,\n          valarr: filters[key],\n        });\n      }\n    });\n\n    //append force search\n    if (this.props.forceSearch) {\n      queryParams.search = queryParams.search.concat(this.props.forceSearch);\n    }\n\n    //append force filter\n    if (this.props.forceFilter) {\n      queryParams.filter = this.props.forceFilter;\n    }\n\n    //provide sortings\n    if (sorter.column) {\n      queryParams.orderby = [\n        `${sorter.field} ${sorter.order === \"ascend\" ? \"ASC\" : \"DESC\"}`,\n      ];\n    } else {\n      if (!sorter.field) {\n        queryParams.orderby = this.makeBasicDefaultOrderParams();\n      }\n    }\n\n    //provide paginations to query\n    if (pagination.total && !mode.skipPagination) {\n      queryParams.reclimit = pagination.pageSize;\n      queryParams.recoffset = (pagination.current - 1) * pagination.pageSize;\n    }\n\n    return queryParams;\n  };\n\n  columnGet = (key) => {\n    let result = {};\n    this.state.columns.forEach((col) => {\n      if (col.dataIndex === key) {\n        result = col;\n      }\n    });\n    return result;\n  };\n\n  count = async () => {\n    if (this.state.columns.length === 0) return 0;\n\n    let result = await this.context.api.q(\n      this.props.path.replace(\"/list\", \"/count\"),\n      this.makeQueryParams({ skipPagination: true }),\n      {},\n      this.props.forceToken || false,\n      this.props.skipToken || false\n    );\n    return result.count;\n  };\n\n  load = async () => {\n    const { pagination, columns } = this.state;\n\n    if (columns.length === 0) return;\n\n    let data = [];\n\n    this.loadStart();\n\n    pagination.total = await this.count();\n    if (pagination.total) {\n      data = await this.context.api.q(\n        this.props.path,\n        this.makeQueryParams(),\n        {\n          toArray: true,\n        },\n        this.props.forceToken || false,\n        this.props.skipToken || false\n      );\n    }\n    this.setState({ data, pagination });\n\n    this.loadEnd();\n  };\n\n  loadStart = () => {\n    this.setState({ loading: true });\n    if (this.props.onLoadStart) {\n      this.props.onLoadStart();\n    }\n  };\n\n  loadEnd = () => {\n    this.setState({ loading: false });\n    if (this.props.onLoadEnd) {\n      this.props.onLoadEnd();\n    }\n  };\n\n  handleTableChange = (pagination, filters, sorter) => {\n    this.setState({ pagination, filters, sorter }, () => this.load());\n  };\n\n  render() {\n    const { columns, data, pagination, loading } = this.state;\n\n    return (\n      <div>\n        <Table\n          scroll={{ x: 400 }}\n          showSorterTooltip={false}\n          columns={columns}\n          rowKey={(record) => record.id}\n          dataSource={data}\n          pagination={pagination}\n          loading={loading || this.props.loading}\n          onChange={this.handleTableChange}\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Button, Space, Input } from \"antd\";\nimport { useIntl } from \"react-intl\";\n\nimport IntlMessages from \"../../util/IntlMessages\";\n\nexport default function DataTableSearch(props) {\n  const { setSelectedKeys, selectedKeys, confirm, clearFilters } = props;\n  function onChange(e) {\n    setSelectedKeys([e.target.value]);\n  }\n  function onKeyPress(e) {\n    if (e.key === \"Enter\") {\n      confirm();\n    }\n  }\n  const intl = useIntl();\n\n  return (\n    <div style={{ padding: 8 }}>\n      <Space>\n        <Input\n          placeholder={intl.formatMessage({\n            id: \"DataTableSearch.placeholder\",\n          })}\n          value={selectedKeys[0] || \"\"}\n          onChange={onChange}\n          onKeyPress={onKeyPress}\n        />\n        <div style={{ paddingTop: 12 }}>\n          <Button type=\"primary\" onClick={() => confirm()}>\n            <IntlMessages id=\"DataTableSearch.search\" />\n          </Button>\n        </div>\n        <div style={{ paddingTop: 12 }}>\n          <Button onClick={() => clearFilters()}>\n            <IntlMessages id=\"DataTableSearch.reset\" />\n          </Button>\n        </div>\n      </Space>\n    </div>\n  );\n}\n","import { message, Popover, Spin, Tag, Modal } from \"antd\";\nimport { injectIntl } from \"react-intl\";\nimport React from \"react\";\nimport Context from \"../Context\";\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\nimport { withOnline } from \"../api/online\";\n\nconst { confirm } = Modal;\n\nclass Statelabel extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverOpen: false,\n      methods: [],\n    };\n  }\n\n  popoverToggle = () => {\n    this.setState(\n      (state) => {\n        return {\n          popoverOpen: !state.popoverOpen,\n          methods: !state.popoverOpen ? [] : state.methods,\n        };\n      },\n      () => this.load()\n    );\n  };\n\n  pendingStart = () => {\n    if (this.props.onPendingStart) {\n      this.props.onPendingStart();\n      return;\n    }\n    this.setState({ pending: true });\n  };\n\n  pendingEnd = () => {\n    if (this.props.onPendingEnd) {\n      this.props.onPendingEnd();\n      return;\n    }\n    this.setState({ pending: false });\n  };\n\n  load = async () => {\n    if (this.state.popoverOpen) {\n      this.pendingStart();\n      let methods = await this.context.api.q(\n        `/${this.props.classcode}/method`,\n        { id: this.props.id },\n        { toArray: true }\n      );\n      this.setState({ methods }, () => this.pendingEnd());\n    }\n  };\n\n  run = async (method) => {\n    this.pendingStart();\n    let result = await this.context.api.q(\"/method/run\", {\n      id: this.props.id,\n      method: method.id,\n    });\n    this.pendingEnd();\n    this.popoverToggle();\n    if (!result) {\n      message.error(this.m(\"method.fail\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"method.success\"));\n      if (this.props.onFinish) {\n        this.props.onFinish(method);\n      }\n    }\n  };\n\n  ask = async (method) => {\n    if (method.actioncode === \"drop\") {\n      confirm({\n        title: this.m(\"method.confirm.title\"),\n        content: this.m(\"method.confirm.text\"),\n        icon: <ExclamationCircleOutlined />,\n        onOk: () => {\n          this.run(method);\n        },\n      });\n    } else {\n      this.run(method);\n    }\n  };\n\n  m = (id) => {\n    const { intl } = this.props;\n    return intl.formatMessage({ id });\n  };\n\n  render() {\n    if (!this.props?.statelabel) return null;\n\n    const { pending, methods = [] } = this.state;\n\n    const colors = {\n      created: \"processing\",\n      enabled: \"success\",\n      disabled: \"default\",\n      deleted: \"error\",\n    };\n\n    const label = (\n      <Tag className=\"gx-m-0\" color={colors[this.props.statetypecode]}>\n        {this.props.statelabel}\n      </Tag>\n    );\n\n    if (this.props.readOnly) return label;\n\n    return (\n      <Popover\n        content={\n          <div className={`${methods.length === 0 && \"gx-p-3\"}`}>\n            <Spin spinning={pending}>\n              {methods.map((method) => {\n                if (!method.visible) return null;\n                return (\n                  <div\n                    key={method.id}\n                    onClick={() => this.ask(method)}\n                    className=\"gx-my-2 gx-pointer gx-link\"\n                  >\n                    {method.label}\n                  </div>\n                );\n              })}\n            </Spin>\n          </div>\n        }\n        trigger=\"click\"\n        visible={this.state.popoverOpen}\n        onVisibleChange={this.popoverToggle}\n      >\n        <div className=\"gx-pointer\">{label}</div>\n      </Popover>\n    );\n  }\n}\n\nconst mapOnlineProps = {\n  statelabel: (d) => d.statenewlabel,\n  statetypecode: (d) => d.statenewtypecode,\n};\nexport default withOnline(injectIntl(Statelabel), mapOnlineProps);\n","import React from \"react\";\nimport config from \"./config\";\nimport accessToken from \"./token\";\n\nconst online = {\n  is: false,\n\n  tick: () => {\n    online.fetch();\n  },\n  goOffline: () => {\n    if (online.is) {\n      online.is = false;\n      online.dispatch(\"onlineGoOffline\");\n      online.log(\"Went offline\");\n    }\n  },\n  goOnline: () => {\n    if (!online.is) {\n      online.is = true;\n      online.dispatch(\"onlineGoOnline\");\n      online.log(\"Back On Line\");\n    }\n  },\n  dispatch: (type, detail = {}) => {\n    window.dispatchEvent(new CustomEvent(type, { detail }));\n  },\n  fetch: async () => {\n    let token = accessToken.get();\n    if (token) {\n      let dt = new Date();\n      dt.setMilliseconds(\n        dt.getMilliseconds() - (config.apiCheckInterval + 5000)\n      );\n\n      const body = JSON.stringify({\n        search: [{ field: \"datetime\", value: dt, compare: \"GEQ\" }],\n        reclimit: 500,\n        orderby: [\"datetime DESC\"],\n      });\n\n      let json = null;\n      let response = null;\n      let headers = new Headers();\n      headers.append(\"Content-Type\", \"application/json\");\n      headers.append(\"Authorization\", `Bearer ${token}`);\n      const url = `${config.apiDomain}${config.apiPath}/notification/list`;\n\n      try {\n        response = await fetch(url, {\n          method: \"POST\",\n          headers,\n          body,\n          mode: \"cors\",\n          cache: \"no-store\",\n        });\n        if (response) {\n          json = await response.json();\n          if (json?.error) {\n            return online.error(json?.error?.message);\n          }\n        }\n        online.goOnline();\n      } catch (e) {\n        online.goOffline();\n        return online.error(e.message);\n      }\n      if (json) {\n        let items = {};\n        (Array.isArray(json) ? json : [json]).forEach((n) => {\n          if (!items[n.object]) {\n            items[n.object] = n;\n          }\n        });\n\n        let itemsCount = Object.keys(items).length;\n\n        if (itemsCount > 0) {\n          online.dispatch(\"onlineChanged\", { items });\n          online.log(\"messages count \" + itemsCount);\n        }\n      }\n      return false;\n    }\n  },\n  error: (message) => {\n    if (config.debug) {\n      console.log(`%c OnLine: ERROR \"${message}\"`, \"color: orange\");\n    }\n    return false;\n  },\n  log: (message) => {\n    if (config.debug) {\n      console.log(`%c OnLine: ${message}`, \"color: cyan\");\n    }\n  },\n};\n\nif (!window.onlineInterval && config.apiCheckInterval) {\n  window.setInterval(() => online.tick(), config.apiCheckInterval);\n}\n\nfunction withOnline(Component, mapOnlineProps) {\n  const propsKeys = Object.keys(mapOnlineProps);\n\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        data: {},\n        passProps: {},\n      };\n    }\n    componentDidMount() {\n      window.addEventListener(\"onlineChanged\", this.onOnlineChanged);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener(\"onlineChanged\", this.onOnlineChanged);\n    }\n\n    onOnlineChanged = (e) => {\n      let data = e?.detail?.items[this.props.id];\n      if (data) {\n        this.setState(({ passProps }) => {\n          propsKeys.forEach((propName) => {\n            passProps[propName] = mapOnlineProps[propName](data);\n          });\n          return { passProps };\n        });\n\n        this.setState({ data });\n      }\n    };\n\n    componentDidUpdate(prevProps) {\n      let { passProps } = this.state;\n      let anyChanges = false;\n\n      propsKeys.forEach((propName) => {\n        if (prevProps[propName] !== this.props[propName]) {\n          passProps[propName] = this.props[propName];\n          anyChanges = true;\n        }\n      });\n      if (anyChanges) this.setState({ passProps });\n    }\n\n    render() {\n      const { passProps } = this.state;\n\n      return <Component {...this.props} {...passProps} />;\n    }\n  };\n}\n\nexport { online, withOnline };\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nvar CheckableTag = function CheckableTag(_a) {\n  var _classNames;\n  var customizePrefixCls = _a.prefixCls,\n    className = _a.className,\n    checked = _a.checked,\n    onChange = _a.onChange,\n    onClick = _a.onClick,\n    restProps = __rest(_a, [\"prefixCls\", \"className\", \"checked\", \"onChange\", \"onClick\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls;\n  var handleClick = function handleClick(e) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(!checked);\n    onClick === null || onClick === void 0 ? void 0 : onClick(e);\n  };\n  var prefixCls = getPrefixCls('tag', customizePrefixCls);\n  var cls = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-checkable\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-checkable-checked\"), checked), _classNames), className);\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, restProps, {\n    className: cls,\n    onClick: handleClick\n  }));\n};\nexport default CheckableTag;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport { PresetColorTypes, PresetStatusColorTypes } from '../_util/colors';\nimport Wave from '../_util/wave';\nimport warning from '../_util/warning';\nimport CheckableTag from './CheckableTag';\nvar PresetColorRegex = new RegExp(\"^(\".concat(PresetColorTypes.join('|'), \")(-inverse)?$\"));\nvar PresetStatusColorRegex = new RegExp(\"^(\".concat(PresetStatusColorTypes.join('|'), \")$\"));\nvar InternalTag = function InternalTag(_a, ref) {\n  var _classNames;\n  var customizePrefixCls = _a.prefixCls,\n    className = _a.className,\n    style = _a.style,\n    children = _a.children,\n    icon = _a.icon,\n    color = _a.color,\n    onClose = _a.onClose,\n    closeIcon = _a.closeIcon,\n    _a$closable = _a.closable,\n    closable = _a$closable === void 0 ? false : _a$closable,\n    props = __rest(_a, [\"prefixCls\", \"className\", \"style\", \"children\", \"icon\", \"color\", \"onClose\", \"closeIcon\", \"closable\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var _React$useState = React.useState(true),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    visible = _React$useState2[0],\n    setVisible = _React$useState2[1];\n  // Warning for deprecated usage\n  if (process.env.NODE_ENV !== 'production') {\n    process.env.NODE_ENV !== \"production\" ? warning(!('visible' in props), 'Tag', '`visible` will be removed in next major version, please use `visible && <Tag />` instead.') : void 0;\n  }\n  React.useEffect(function () {\n    if ('visible' in props) {\n      setVisible(props.visible);\n    }\n  }, [props.visible]);\n  var isPresetColor = function isPresetColor() {\n    if (!color) {\n      return false;\n    }\n    return PresetColorRegex.test(color) || PresetStatusColorRegex.test(color);\n  };\n  var tagStyle = _extends({\n    backgroundColor: color && !isPresetColor() ? color : undefined\n  }, style);\n  var presetColor = isPresetColor();\n  var prefixCls = getPrefixCls('tag', customizePrefixCls);\n  var tagClassName = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(color), presetColor), _defineProperty(_classNames, \"\".concat(prefixCls, \"-has-color\"), color && !presetColor), _defineProperty(_classNames, \"\".concat(prefixCls, \"-hidden\"), !visible), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n  var handleCloseClick = function handleCloseClick(e) {\n    e.stopPropagation();\n    onClose === null || onClose === void 0 ? void 0 : onClose(e);\n    if (e.defaultPrevented) {\n      return;\n    }\n    if (!('visible' in props)) {\n      setVisible(false);\n    }\n  };\n  var renderCloseIcon = function renderCloseIcon() {\n    if (closable) {\n      return closeIcon ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        onClick: handleCloseClick\n      }, closeIcon) : /*#__PURE__*/React.createElement(CloseOutlined, {\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        onClick: handleCloseClick\n      });\n    }\n    return null;\n  };\n  var isNeedWave = 'onClick' in props || children && children.type === 'a';\n  var tagProps = omit(props, ['visible']);\n  var iconNode = icon || null;\n  var kids = iconNode ? /*#__PURE__*/React.createElement(React.Fragment, null, iconNode, /*#__PURE__*/React.createElement(\"span\", null, children)) : children;\n  var tagNode = /*#__PURE__*/React.createElement(\"span\", _extends({}, tagProps, {\n    ref: ref,\n    className: tagClassName,\n    style: tagStyle\n  }), kids, renderCloseIcon());\n  return isNeedWave ? /*#__PURE__*/React.createElement(Wave, null, tagNode) : tagNode;\n};\nvar Tag = /*#__PURE__*/React.forwardRef(InternalTag);\nif (process.env.NODE_ENV !== 'production') {\n  Tag.displayName = 'Tag';\n}\nTag.CheckableTag = CheckableTag;\nexport default Tag;","import React from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { Select } from \"antd\";\nimport Context from \"../Context\";\n\nconst { Option } = Select;\n\nclass PlainSelect extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: \"\",\n      pending: false,\n      items: [],\n    };\n  }\n  componentDidMount() {\n    this.load().then(this.shureHaveValue());\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.value !== this.props.value) {\n      this.shureHaveValue();\n    }\n  }\n\n  createSearch = () => {\n    let search = this.props.search || [];\n    if (this.state.searchText && this.props.async) {\n      search.push({\n        field: this.props.labelKey || \"label\",\n        compare: \"IKE\",\n        value: `%${this.state.searchText}%`,\n      });\n    }\n    if (this.props.enabledOnly) {\n      search.push({\n        field: \"statetypecode\",\n        compare: \"EQL\",\n        value: \"enabled\",\n      });\n    }\n    return search;\n  };\n\n  getLabelKey = () => this.props.labelKey || \"label\";\n\n  getIdKey = () => this.props.valueKey || \"id\";\n\n  shureHaveValue = async () => {\n    if (this.props.async) {\n      if (\n        !this.state.items.find(\n          (item) => item[this.getIdKey()] === this.props.value\n        )\n      ) {\n        this.setState({ pending: true });\n        let result = await this.context.api.q(\"/object/get\", {\n          id: this.props.value,\n          fields: [this.getIdKey(), this.getLabelKey()],\n        });\n        this.setState({ pending: false });\n        if (result?.[this.getLabelKey()]) {\n          this.setState(({ items }) => {\n            items.push(result);\n            return { items };\n          });\n        }\n      }\n    }\n  };\n\n  load = async () => {\n    if (this.props.items) {\n      this.setState({ items: this.props.items });\n      return;\n    }\n\n    let items = [];\n\n    let reclimit = this.props.async ? 1 : 0;\n\n    if (this.props.query) {\n      this.setState({ pending: true });\n      let search = this.createSearch();\n\n      let fields = [this.getIdKey(), this.getLabelKey()].concat(\n        this.props.extraFields || []\n      );\n\n      let fetchFn = this.props.cache\n        ? this.context.api.cache\n        : this.context.api.q;\n      items = await fetchFn(\n        this.props.query,\n        { search, reclimit, fields },\n        { toArray: true }\n      );\n      this.setState({ pending: false, items });\n    }\n  };\n  onSearch = async (value) => {\n    if (this.props.async) {\n      this.setState({ searchText: value }, () => this.load());\n    }\n  };\n\n  onChange = (value) => {\n    let item = this.state.items.find((i) => i[this.getIdKey()] === value);\n    this.props.onChange(value, item);\n  };\n\n  render() {\n    let valueRendered = false;\n    let items = this.state.items.map((item, idx) => {\n      let option = item || {};\n      let value = option[this.getIdKey()];\n      let label = this.props.formatLabel\n        ? this.props.formatLabel(item)\n        : option[this.getLabelKey()];\n      if (value === this.props.value) valueRendered = true;\n      return (\n        <Option key={idx} value={value}>\n          {label}\n        </Option>\n      );\n    });\n\n    return (\n      <Select\n        defaultActiveFirstOption={false}\n        allowClear={this.props.allowClear}\n        loading={this.state.pending ? true : false}\n        value={!this.state.pending ? this.props.value : null}\n        showSearch\n        placeholder={this.props.placeholder}\n        optionFilterProp=\"children\"\n        onChange={this.onChange}\n        onSearch={this.onSearch}\n        filterOption={(input, option) =>\n          option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }\n      >\n        {items}\n      </Select>\n    );\n  }\n}\nexport default injectIntl(PlainSelect);\n","// This icon file is generated automatically.\nvar PlusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z\" } }] }, \"name\": \"plus\", \"theme\": \"outlined\" };\nexport default PlusOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusOutlined = function PlusOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: PlusOutlinedSvg\n  }));\n};\n\nPlusOutlined.displayName = 'PlusOutlined';\nexport default /*#__PURE__*/React.forwardRef(PlusOutlined);","import React from \"react\";\nimport { Form, Button, message, Modal, Spin, Empty, Input } from \"antd\";\nimport Context from \"../Context\";\nimport { injectIntl } from \"react-intl\";\nclass EditModal extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadPending: false,\n      savePending: false,\n      initialValues: {},\n    };\n  }\n\n  pendingStart = () => {\n    if (this.props.onPendingStart) {\n      this.props.onPendingStart();\n      return;\n    }\n    this.setState({ loadPending: true });\n  };\n  pendingEnd = () => {\n    if (this.props.onPendingEnd) {\n      this.props.onPendingEnd();\n      return;\n    }\n    this.setState({ loadPending: false });\n  };\n\n  componentDidMount() {\n    this.load();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.id !== this.props.id) {\n      this.load();\n    }\n  }\n\n  load = async () => {\n    if (this.props.id) {\n      this.pendingStart();\n      let queryParams = this.props.queryParams || { id: this.props.id };\n      let loadPath = this.props.loadPath || `/${this.props.essence}/get`;\n      let queryResult = await this.context.api.q(loadPath, queryParams, {\n        exact: true,\n      });\n      this.setState({ initialValues: queryResult || {} }, () =>\n        this.pendingEnd()\n      );\n    } else {\n      this.setState({ initialValues: {} });\n    }\n  };\n\n  save = async (data) => {\n    let item = this.state.initialValues;\n    let saveData = this.props.prepareData\n      ? this.props.prepareData({ data, item })\n      : data;\n    let savePath = this.props.savePath || `/${this.props.essence}/set`;\n\n    saveData.id = item.id || null;\n\n    this.setState({ savePending: true });\n\tconsole.log(\"@@@\", savePath, saveData)\n    let result = await this.context.api.q(savePath, saveData);\n    if (!result) {\n      message.error(this.m(\"save.fail\", \"\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"save.success\", \"\"));\n      if (this.props.onFinish) this.props.onFinish();\n    }\n\n    this.setState({ savePending: false });\n  };\n\n  onClose = () => {\n    if (this.props.onClose) this.props.onClose();\n  };\n\n  m = (key, prefix = \"editmodal.\") => {\n    const { intl } = this.props;\n    return intl.formatMessage({ id: prefix + key });\n  };\n\n  render() {\n    const { visible, essence, id } = this.props;\n    const { loadPending, savePending, initialValues } = this.state;\n\n    return (\n      <Modal visible={visible} footer={null} onCancel={this.onClose}>\n        <Spin spinning={loadPending}>\n          {!loadPending && id && !initialValues.id ? (\n            <Empty />\n          ) : (\n            <div className=\"gx-p-3\">\n              <Form\n                key={initialValues.id}\n                name={essence}\n                layout=\"vertical\"\n                initialValues={initialValues}\n                onFinish={this.save}\n                scrollToFirstError\n              >\n                {this.props.form}\n                <Button\n                  loading={savePending}\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  className=\"gx-mb-0\"\n                >\n                  {this.m(\"save\", \"\")}\n                </Button>\n              </Form>\n            </div>\n          )}\n        </Spin>\n      </Modal>\n    );\n  }\n}\nexport default injectIntl(EditModal);\n","import React from \"react\";\nimport PlainSelect from \"../../../util/PlainSelect\";\nimport { Form, Input } from \"antd\";\nconst { TextArea } = Input;\n\nexport default function referenceEditForm({ essence }) {\n  const reference = window.appConfig?.adminReferences[essence] || {};\n\n  let formItems = {\n    name: {\n      rules: [\n        {\n          required: true,\n        },\n      ],\n    },\n\n    type: {\n      rules: [\n        {\n          required: true,\n        },\n      ],\n      label: this.m(\"typename\"),\n      component: (\n        <PlainSelect labelKey=\"name\" cache query={`/${essence}/type`} />\n      ),\n    },\n\n    description: {\n      component: <TextArea />,\n    },\n  };\n\n  if (reference.extraFields) {\n    Object.entries(reference.extraFields).forEach(([key, field]) => {\n      formItems[key] = {\n        label: this.m(key),\n      };\n      if (field.type === \"reference\") {\n        formItems[key].component = (\n          <PlainSelect labelKey=\"name\" cache query={field.path} />\n        );\n      }\n      if (field.required) {\n        formItems[key].rules = [\n          {\n            required: true,\n          },\n        ];\n      }\n    });\n  }\n\n  return (\n    <>\n      {Object.entries(formItems).map(([key, item]) => {\n        let label = item.label || this.m(key);\n        let component = item.component || <Input />;\n\n        return (\n          <Form.Item key={key} rules={item.rules} label={label} name={key}>\n            {component}\n          </Form.Item>\n        );\n      })}\n    </>\n  );\n}\n"],"sourceRoot":""}