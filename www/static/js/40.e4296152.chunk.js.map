{"version":3,"sources":["util/compressor.js","routes/Profile/Profile.js","util/toBase64.js"],"names":["defaultParams","maxWidth","maxHeight","quality","compressor","base64","callParams","canvas","document","createElement","img","Object","assign","Promise","resolve","reject","onload","width","height","Math","round","getContext","drawImage","toDataURL","onerror","err","src","Profile","props","m","key","prefix","intl","formatMessage","id","save","data","user","setState","pending","context","api","q","username","raw","profile","password","email","name","message","success","onAfterSave","error","changePassword","oldpass","newpass","prepareAvatar","state","fileInputRef","current","files","file","maxSize","window","appConfig","maxFileSize","size","toBase64","readerResult","then","compressedResult","saveAvatar","modalHide","picture","modalShow","location","reload","moodalShow","React","createRef","this","layout","labelCol","span","wrapperCol","Helmet","title","visible","onOk","onCancel","footer","onClick","type","loading","spinning","ref","className","Flex","between","wrap","show","style","marginRight","literal","hello","backgroundColor","count","isAdmin","isGuest","connectionLink","navigator","clipboard","writeText","CopyOutlined","onFinish","autoComplete","Item","rules","required","label","initialValue","placeholder","htmlType","Password","Component","contextType","Context","connect","injectIntl","reader","FileReader","readAsDataURL","result","resultString","toString","re","match","encoded","replace","length","repeat"],"mappings":"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","file":"static/js/40.e4296152.chunk.js","sourcesContent":["const defaultParams = {\n  maxWidth: 2000,\n  maxHeight: 2000,\n  quality: 0.8,\n};\n\nexport default function compressor(base64, callParams = {}) {\n  const canvas = document.createElement(\"canvas\");\n  const img = document.createElement(\"img\");\n\n  const { maxWidth, maxHeight, quality } = Object.assign(\n    defaultParams,\n    callParams\n  );\n\n  return new Promise((resolve, reject) => {\n    img.onload = function () {\n      let width = img.width;\n      let height = img.height;\n\n      if (width > height) {\n        if (width > maxWidth) {\n          height = Math.round((height *= maxWidth / width));\n          width = maxWidth;\n        }\n      } else {\n        if (height > maxHeight) {\n          width = Math.round((width *= maxHeight / height));\n          height = maxHeight;\n        }\n      }\n      canvas.width = width;\n      canvas.height = height;\n\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0, width, height);\n      //resolve(base64);\n      resolve(canvas.toDataURL(\"image/jpeg\", quality));\n    };\n    img.onerror = function (err) {\n      resolve(false);\n    };\n    img.src = base64;\n  });\n}\n","import React from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport Context from \"../../Context\";\nimport { Helmet } from \"react-helmet\";\nimport {\n  Form,\n  Input,\n  Button,\n  Space,\n  Card,\n  Avatar,\n  Badge,\n  Row,\n  Col,\n  message,\n  Modal,\n  Spin,\n} from \"antd\";\n\nimport { connect } from \"react-redux\";\nimport Flex from \"../../util/Flex\";\nimport compressor from \"../../util/compressor\";\nimport toBase64 from \"../../util/toBase64\";\nimport { CopyOutlined } from \"@ant-design/icons\";\n\nclass Profile extends React.Component {\n  static contextType = Context;\n  constructor(props) {\n    super(props);\n    this.state = {\n      pending: false,\n      moodalShow: false,\n      fileInputRef: React.createRef(),\n    };\n  }\n  m = (key, prefix = \"userprofile.\") => {\n    const { intl } = this.props;\n    return intl.formatMessage({ id: prefix + key });\n  };\n  save = async (data) => {\n    const { user } = this.props;\n    this.setState({ pending: true });\n    let result = await this.context.api.q(\"/user/set\", {\n      username: user.raw.profile.username,\n      password: data.password,\n      email: data.email,\n      name: data.name,\n    });\n    if (!result) {\n      message.error(this.m(\"save.fail\", \"\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"save.success\", \"\"));\n      this.onAfterSave();\n    }\n  };\n\n  changePassword = async (data) => {\n    this.setState({ pending: true });\n    let result = await this.context.api.q(\"/user/password\", {\n      oldpass: data.oldpass,\n      newpass: data.newpass,\n    });\n    if (!result) {\n      message.error(this.m(\"save.fail\", \"\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"save.success\", \"\"));\n      this.onAfterSave();\n    }\n  };\n\n  prepareAvatar = async () => {\n    if (this.state.fileInputRef.current) {\n      if (this.state.fileInputRef.current.files[0]) {\n        this.setState({ pending: true });\n        const file = this.state.fileInputRef.current.files[0];\n\n        const maxSize = window.appConfig.maxFileSize;\n        if (maxSize && file.size > maxSize) {\n          message.error(\n            `${this.m(\"file.size.exceed\", \"\")}: ${Math.round(\n              maxSize / 1024\n            )} ${this.m(\"kb\", \"\")}`\n          );\n          this.setState({ pending: false });\n          return;\n        }\n\n        let { readerResult } = await toBase64(file);\n        compressor(readerResult, { maxWidth: 200, maxHeight: 200 }).then(\n          (compressedResult) => {\n            if (compressedResult) {\n              this.saveAvatar(compressedResult);\n            } else {\n              message.error(this.m(\"file.read.failed\", \"\"));\n              this.setState({ pending: false });\n            }\n          }\n        );\n      } else {\n        this.modalHide();\n      }\n    } else {\n      this.modalHide();\n    }\n  };\n  saveAvatar = async (picture) => {\n    this.setState({ pending: true });\n    let result = await this.context.api.q(\"/user/profile/set\", {\n      picture,\n    });\n    if (!result) {\n      message.error(this.m(\"save.fail\", \"\"));\n      this.setState({ pending: false });\n    } else {\n      message.success(this.m(\"save.success\", \"\"));\n      this.onAfterSave();\n    }\n  };\n  modalShow = () => {\n    this.setState({ modalShow: true });\n  };\n  modalHide = () => {\n    this.setState({ modalShow: false });\n  };\n  onAfterSave = () => {\n    document.location.reload();\n  };\n  render() {\n    const { user } = this.props;\n    const { pending, modalShow, fileInputRef } = this.state;\n\n    const layout = {\n      labelCol: {\n        span: 8,\n      },\n      wrapperCol: {\n        span: 16,\n      },\n    };\n\n    return (\n      <div>\n        <Helmet>\n          <title>{this.m(\"profile\")}</title>\n        </Helmet>\n        <Modal\n          title={this.m(\"avatar.change\")}\n          visible={modalShow}\n          onOk={this.prepareAvatar}\n          onCancel={this.modalHide}\n          footer={[\n            <Button key=\"cancell\" onClick={this.modalHide}>\n              {this.m(\"cancell\", \"\")}\n            </Button>,\n            <Button key=\"remove\" onClick={() => this.saveAvatar(\"\")}>\n              {this.m(\"avatar.remove\")}\n            </Button>,\n            <Button\n              key=\"submit\"\n              type=\"primary\"\n              loading={pending}\n              onClick={this.prepareAvatar}\n            >\n              {this.m(\"save\", \"\")}\n            </Button>,\n          ]}\n        >\n          <Spin spinning={pending}>\n            <input ref={fileInputRef} type=\"file\" className=\"form-control\" />\n          </Spin>\n        </Modal>\n        <h2 className=\"title gx-mb-4\">{this.m(\"profile\")}</h2>\n        <Card>\n          <Flex between className=\"flex-reset-lg\">\n            <Flex wrap>\n              <div className=\"gx-pointer\" onClick={this.modalShow}>\n                {user.show.picture ? (\n                  <Avatar\n                    size={64}\n                    src={user.show.picture}\n                    style={{\n                      marginRight: \"15px\",\n                    }}\n                  />\n                ) : (\n                  <Avatar\n                    size={64}\n                    style={{\n                      marginRight: \"15px\",\n                    }}\n                  >\n                    {user.show.literal}\n                  </Avatar>\n                )}\n              </div>\n              <div>\n                <h5>{user.show.hello}</h5>\n                <Space>\n                  <Badge\n                    style={{ backgroundColor: \"#52c41a\" }}\n                    count={this.m(\"active\")}\n                  />\n                  {user.isAdmin && (\n                    <Badge\n                      style={{ backgroundColor: \"#038FDE\" }}\n                      count={this.m(\"admin\")}\n                    />\n                  )}\n                  {user.isGuest && (\n                    <Badge\n                      style={{ backgroundColor: \"#a0d911\" }}\n                      count={this.m(\"guest\")}\n                    />\n                  )}\n                </Space>\n              </div>\n            </Flex>\n            <div className=\"gx-text-right\">\n              <div>{this.m(\"connection\")}:</div>\n              <div className=\"gx-text-muted gx-font-weight-light gx-mt-1 break-all\">\n                {user.connectionLink}\n                <span\n                  className=\"gx-ml-2 gx-link\"\n                  onClick={() => {\n                    navigator.clipboard.writeText(user.connectionLink);\n                    message.success(this.m(\"copied\"));\n                  }}\n                >\n                  <CopyOutlined />\n                </span>\n              </div>\n            </div>\n          </Flex>\n        </Card>\n        <Card>\n          <Spin spinning={pending}>\n            <Form\n              name=\"basic\"\n              onFinish={this.save}\n              className=\"gx-signin-form gx-form-row0\"\n              autoComplete=\"off\"\n              {...layout}\n            >\n              <Form.Item\n                rules={[\n                  {\n                    required: true,\n                    type: \"email\",\n                    message: this.m(\"email.invalid\"),\n                  },\n                ]}\n                name=\"email\"\n                label={this.m(\"email\")}\n                initialValue={user.raw.profile.email}\n              >\n                <Input placeholder={this.m(\"email\")} />\n              </Form.Item>\n              <Form.Item\n                rules={[\n                  {\n                    required: true,\n                    message: this.m(\"name.invalid\"),\n                  },\n                ]}\n                name=\"name\"\n                label={this.m(\"name\")}\n                initialValue={user.raw.profile.name}\n              >\n                <Input placeholder={this.m(\"name\")} />\n              </Form.Item>\n\n              <Row>\n                <Col span={8}></Col>\n                <Col span={16}>\n                  <Button type=\"primary\" htmlType=\"submit\" loading={pending}>\n                    {this.m(\"save\", \"\")}\n                  </Button>\n                </Col>\n              </Row>\n            </Form>\n          </Spin>\n        </Card>\n        <h2 className=\"gx-mb-4\">{this.m(\"passchange\")} </h2>\n        <Card>\n          <Spin spinning={pending}>\n            <Form\n              name=\"basic\"\n              onFinish={this.changePassword}\n              className=\"gx-signin-form gx-form-row0\"\n              autoComplete=\"off\"\n              {...layout}\n            >\n              <Form.Item\n                rules={[\n                  {\n                    required: true,\n                  },\n                ]}\n                label={this.m(\"oldpass\")}\n                name=\"oldpass\"\n              >\n                <Input.Password />\n              </Form.Item>\n              <Form.Item\n                rules={[\n                  {\n                    required: true,\n                  },\n                ]}\n                label={this.m(\"newpass\")}\n                name=\"newpass\"\n              >\n                <Input.Password />\n              </Form.Item>\n\n              <Row>\n                <Col span={8}></Col>\n                <Col span={16}>\n                  <Button type=\"primary\" htmlType=\"submit\" loading={pending}>\n                    {this.m(\"change\", \"\")}\n                  </Button>\n                </Col>\n              </Row>\n            </Form>\n          </Spin>\n        </Card>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n});\n\nexport default connect(mapStateToProps, null)(injectIntl(Profile));\n","export default function toBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => {\n      const readerResult = reader.result;\n      const resultString = readerResult.toString();\n      const re = /^data:(.*,)?/;\n      let mimeRe = resultString.match(re);\n      let type = mimeRe[0];\n\n      let encoded = resultString.replace(re, \"\");\n      if (encoded.length % 4 > 0) {\n        encoded += \"=\".repeat(4 - (encoded.length % 4));\n      }\n\n      resolve({ encoded, type, readerResult });\n    };\n    reader.onerror = (error) => reject(error);\n  });\n}\n"],"sourceRoot":""}